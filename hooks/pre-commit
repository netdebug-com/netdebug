#!/bin/bash


# this needs to be updated for each new directory

dirs="webserver webserver/common webserver/web-client"

for d in $dirs; do
	diff=$(cd $d && cargo fmt -- --check)
	result=$?

	if [[ ${result} -ne 0 ]] ; then
	    echo ' There are some code style issues, run `cargo fmt` first.'
	    echo $diff
	    echo ' There are some code style issues, run `cargo fmt` first.'
	    exit 1
	fi
done

exit 0
